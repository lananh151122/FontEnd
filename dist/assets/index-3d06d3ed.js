import{r as c,j as s,bY as U,R as i,C as r,bZ as V,B as S,b_ as z,a as w,b as I,ba as R,bb as H,h as M,w as d,b$ as k,f}from"./index-481ffadb.js";import{S as O,A as Y,a as Z,L as _}from"./index-7f07892c.js";import{B as G}from"./PageContainer-c5995948.js";import{Q as J}from"./quantityInput-45ab5dca.js";import{R as K}from"./index-ef4849db.js";import{T as W}from"./index.esm-cf7d7351.js";import{T as j}from"./ProCard-f8f59c62.js";import"./index-32131d29.js";import"./CopyOutlined-d3095ff5.js";const X={dots:!1,infinite:!1,arrows:!0,speed:500,slidesToShow:5,vertical:!1,verticalSwiping:!1,slidesToScroll:1,autoplay:!0,nextArrow:s.jsx(Y,{}),prevArrow:s.jsx(Z,{})},D=({child:m,setCurrentChild:a})=>{const[p,u]=c.useState(null),x=(t,l)=>{u(l),a(t)};return s.jsx(O,{...X,children:m.map((t,l)=>s.jsx("div",{onClick:()=>x(t.props.src,l),className:p===l?"border-red-500":"",children:t},l))})},{Text:o}=W,os=()=>{var v,C;const{productId:m}=U(),[a,p]=c.useState(),[u,x]=c.useState(),[t,l]=c.useState(),[g,T]=c.useState(1),[h,N]=c.useState(),L=async()=>{try{const n=(await w.get(`${I.products}/${m}`)).data.data;p(n),x(n==null?void 0:n.imageUrls[0].url)}catch(e){console.error("Error fetching product details:",e)}};c.useEffect(()=>{L()},[]);const P=async()=>{var e;try{if(!h)R("Chưa chọn cửa hàng bán",H.ERROR);else{let n=await w.post(`${I.cart}`,{productDetailId:t==null?void 0:t.id,storeId:h,quantity:g});R((e=n==null?void 0:n.data)==null?void 0:e.message)}}catch(n){M(n)}},A=((v=a==null?void 0:a.imageUrls)==null?void 0:v.map((e,n)=>s.jsx(_,{src:e.url,className:"w-full h-auto p-1"},n)))||[],y=a?a.productName:"",E={items:[{key:d.home,title:s.jsx(k,{to:d.home,children:"Trang chủ"})},{key:d.products,title:s.jsx(k,{to:d.products,children:"Sản phẩm"})},{key:`${d.products}/${m}`,title:y}]},b=e=>{N(h===e?void 0:e)},$=e=>{console.log(e),l(t===e?void 0:e),console.log(t)},B=()=>s.jsx("div",{className:"mt-5 flex items-center bg-slate-100",children:t!=null&&t.discountPercent?s.jsxs(s.Fragment,{children:[s.jsx(o,{delete:!0,className:"text-2xs text-gray-500 pr-2",children:f(t.originPrice)}),s.jsx(o,{className:"text-2xl text-red pr-2",children:f(t.sellPrice)}),s.jsx(j,{color:"red",className:"flex items-center",children:s.jsxs("span",{className:"pr-1",children:[t.discountPercent,"% giảm"]})})]}):s.jsx(o,{className:"text-2xl text-red",children:f(t==null?void 0:t.sellPrice)})}),F=()=>s.jsx("div",{children:a==null?void 0:a.productInfos.map(e=>s.jsxs(i,{className:"mb-8 mt-8",children:[s.jsxs(r,{span:6,children:[e.label," :"]}),s.jsx(r,{span:18,children:e.value})]},e.label))}),Q=()=>s.jsx("div",{children:s.jsxs(i,{children:[s.jsx(r,{span:6,children:"Cửa hàng bán :"}),s.jsx(r,{span:18,children:a==null?void 0:a.stores.map(e=>e.id===h?s.jsx(j,{color:"red",className:"cursor-pointer",onClick:()=>b(e.id),children:e.storeName},e.id):s.jsx(j,{color:"default",className:"cursor-pointer",onClick:()=>b(e.id),children:e.storeName},e.id))})]})}),q=()=>s.jsxs(i,{className:"mt-8 mb-8",children:[s.jsx(r,{span:6,children:"Loại sản phẩm:"}),s.jsx(r,{span:18,children:s.jsx(i,{children:a==null?void 0:a.productDetails.map(e=>s.jsx(r,{className:"mt-1 mb-1",children:s.jsx(j,{className:"cursor-pointer",color:e.id===(t==null?void 0:t.id)?e.type.color:"default",onClick:()=>$(e),children:e.type.type})},e.id))})})]});return s.jsx(G,{breadcrumb:E,children:s.jsxs(i,{justify:"space-around",children:[s.jsxs(r,{span:8,className:"lg:col-span-6 xl:col-span-4",children:[s.jsx("div",{className:"flex justify-center mt-1",children:s.jsx("img",{className:"w-full h-auto rounded-lg",src:u,alt:y})}),s.jsx("div",{className:"pt-5",children:s.jsx(D,{child:A,setCurrentChild:x})})]}),s.jsx(r,{span:15,className:"lg:col-span-6 xl:col-span-8",children:a&&s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-xl font-semibold",children:a==null?void 0:a.productName})}),s.jsx("div",{className:"mt-3 h-6 text-sm",children:s.jsxs(i,{children:[s.jsx(r,{span:1,children:s.jsx(o,{className:"text-red  underline",children:(C=a==null?void 0:a.rate)==null?void 0:C.avgPoint})}),s.jsx(r,{span:6,children:s.jsx(K,{disabled:!0,allowHalf:!0,value:a==null?void 0:a.rate.avgPoint,className:"text-red text-xs"})}),s.jsxs(r,{span:6,className:"flex items-center text-xs",children:[s.jsxs(o,{className:"flex items-center",children:["|   ",a.rate.totalRate]})," đánh giá"]}),s.jsxs(r,{span:6,className:"text-xs flex items-center",children:[s.jsxs(o,{children:["|   ",a.totalView]})," lượt xem"]}),s.jsx(r,{span:5,className:"flex justify-end",children:s.jsx(V,{to:"#",children:"Tố cáo"})})]})}),s.jsxs("div",{className:"mt-5",children:[B(),F(),Q(),q(),s.jsxs(i,{className:"flex items-center mt-5",children:[s.jsx(r,{span:6,children:"Số lượng:"}),s.jsx(r,{span:18,children:s.jsx(J,{quantity:g,setQuantity:T,limit:t==null?void 0:t.quantity,disable:!1})})]}),s.jsxs(i,{className:"pt-5 flex justify-around",children:[s.jsx(S,{type:"default",icon:s.jsx(z,{}),onClick:()=>P(),children:"Thêm vào giỏ hàng"}),s.jsx(S,{type:"primary",children:"Mua ngay"})]})]})]})})]})})};export{os as default};
